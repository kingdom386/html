<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0, user-scalable=0" name="viewport"/>
    <meta name="x5-orientation" content="portrait">
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <link rel="stylesheet" type="text/css" href="css/reset.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/common.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/order.css" media="screen"/>
    <title>购物车</title>
	<style type="text/css">
		textarea{
			user-select: auto !important;
			-ms-user-select: auto !important;
			-moz-user-select: auto !important;
			-webkit-user-select: auto !important;
		}
	</style>
</head>
<body >
<!--头部开始-->
<header class="head-container common-head">
    <a href="javascript:void(0);" onclick="removeStack()" class="back-button"></a>
	<h4>购物车</h4>
	<a href="index.html" class="home-button"></a>
</header>
<!--头部结束-->

<!--底部开始-->
<footer class="footer-container confirm-footer">
	<p class="confirm-price">
		<span id='sumPrice'>0.00</span>
		<em>（含运费<b>0</b>元）</em>
	</p>
	<a href="javascript:void(0);" class="item-buy-button" id='subOrder'>提交订单</a>
</footer>
<!--底部结束-->
<section id="scroll-wrapper">
    <div id="scroll-container">
		<!-- 无订单 -->
		<div class="default-page-container" style="display: none">
			<em class="default-order"></em>
			<p>您还没有订单哦</p>
			<a href="productionList.html">去选购</a>
		</div>

		<div id="hasOrder">
			<input type="hidden" id="adId">
			<a href="javascript:void(0);" onclick="getAddr(this)" class="address-select-container address-select-empty">请先添加收货地址</a>
			<!--地址选择结束-->

            <!--20170531add 自提点地址开始-->
            <div class="address-pick-up-container" style="display:none;">
                <div class="address-pick-up">
                   <!-- <p>
                        <em>自提点</em>
                        <span>台州美莱美店</span>
                    </p>
                    <p>台州市台州市人大浙江省台州市椒江区白云山南路233号</p>-->
                </div>

                <!-- 提货人信息 -->
                <div class="consignee-info">
                    <div class="consignee-container positionRelative">
                        <span>提货人姓名：</span>
                        <div class="consignee-content">
                            <input type="text" id="ztName" placeholder="姓名" />
                        </div>
                    </div>
                    <div class="consignee-container positionRelative">
                        <span>提货人手机：</span>
                        <div class="consignee-content">
                            <input type="tel" maxlength="11" id="ztSj" placeholder="请输入手机号码" />
                        </div>
                    </div>
                    <div class="consignee-container positionRelative">
                        <span>提货时间：</span>
                        <div class="consignee-content txt-right">
                            08：00-16：00
                        </div>
                    </div>
                </div>
            </div>
            <!--20170531add 自提点地址结束-->
			
			<!--商品列表开始-->
			<div class="order-confirm-container">
				<h4>商品列表</h4>
				<ul class="confirm-list">
				</ul>
			</div>
			<!--商品列表结束-->
			<ul class="order-handle-container">
				<li>
					<p>支付方式：</p>
					<div class="order-handle">在线支付</div>
				</li>
				<li>
					<p>配送方式：</p>
					<div href="javascript:;" class="order-handle order-select-handle">
						<span>送货上门</span>
						<select id="getPost">
							<option value="1">送货上门</option>
							<option value="2">自提</option>
						</select>
					</div>

				</li>
				<li class="textarea-li">
					<p>订单备注：</p>
					<div class="order-handle">
						<textarea id="ordNote" placeholder="限45字" ></textarea>
					</div>
				</li>
			</ul>
		</div>
    </div>
</section>

</body>
</html>
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/size.js"></script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/md5.js"></script>
<script type="text/javascript" src="js/secret.js"></script>
<script type="text/javascript" src="js/TouchScroll.js"></script>
<script type="text/javascript" src="js/getOrderConfirm.js"></script>
<script>
    $(function () {
        $(".order-select-handle select").on("change", function () {
            var optionValue = $(this).children("option:checked").val();
            switch (optionValue) {
                case "1":
                    //送货上门
                    $(".address-select-container").show().siblings(".address-pick-up-container").hide();
                    break;
                case "2":
                    //用户登录的状态下
                    var method = 'GetShopAddr',
                        param = {
                            shopid: "3",
                            device: "3"
                        };
                    sign = md5(JSON.stringify(param) + method + reqtime + API_KEY);
                    $.ajax({
                        url: "../API/WebApi.ashx",
                        async: true,
                        type: "post",
                        dataType: 'json',
                        data: {
                            param: JSON.stringify(param),
                            method: method,
                            reqtime: reqtime,
                            sign: getSecret(param, method, reqtime)
                        },
                        success: function (locMsg) {
                            console.log(locMsg);
                            if (locMsg.data != null) {
                                addrFlag = true;
                                btnChange();
                                $('.address-pick-up').html('');
                                var str ='';
                                str+='<p><em>自提点</em>';
                                str+='<span id="zt">'+locMsg.data.cityName+locMsg.data.districtName+'</span></p>';
                                str+='<p id="ztAddr">'+locMsg.data.addr+'</p>';
                                $('.address-pick-up').html(str);
                            } else {
                                addrFlag = false;
                                btnChange();
                                $('.address-pick-up').html('获取当前地点数据失败！');
                            }
                        },
                        error: function(XMLHttpRequest, textStatus, errorThrown) {
                            alert(textStatus);

                        }
                    });

                    $(".address-select-container").hide().siblings(".address-pick-up-container").show();
                    break;
                default:
                    break;
            }
        })
    })
</script>